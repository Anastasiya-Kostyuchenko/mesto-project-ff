{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/api.js","webpack://mesto-project-ff/./src/components/card.js","webpack://mesto-project-ff/./src/components/modal.js","webpack://mesto-project-ff/./src/validation.js","webpack://mesto-project-ff/./src/index.js"],"sourcesContent":["export const cohortId = \"wff-cohort-24\";\nexport const apiToken = \"1f0c507e-d045-450a-a244-e6e5498819e0\";\n\n// Функция для проверки ответа сервера\nexport function checkResponse(res) {\n  if (res.ok) {\n    return res.json();\n  }\n  return Promise.reject(`Ошибка: ${res.status}`);\n}\n\n// Получение данных пользователя с сервера\nexport function getUserInfo() {\n  return fetch(`https://nomoreparties.co/v1/${cohortId}/users/me`, {\n    headers: {\n      authorization: apiToken,\n    },\n  }).then(checkResponse);\n}\n\n// Обновление данных профиля\nexport function updateProfile(name, about) {\n  return fetch(`https://nomoreparties.co/v1/${cohortId}/users/me`, {\n    method: \"PATCH\",\n    headers: {\n      authorization: apiToken,\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      name: name,\n      about: about,\n    }),\n  }).then(checkResponse);\n}\n\n// Получение всех карточек\nexport function getCards() {\n  return fetch(`https://nomoreparties.co/v1/${cohortId}/cards`, {\n    headers: {\n      authorization: apiToken,\n    },\n  }).then(checkResponse);\n}\n\n// Добавление новой карточки функция\nexport function addCard(name, link) {\n  return fetch(`https://nomoreparties.co/v1/${cohortId}/cards`, {\n    method: \"POST\",\n    headers: {\n      authorization: apiToken,\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      name: name,\n      link: link,\n    }),\n  }).then(checkResponse);\n}\n\n// Удаление карточки\nexport function deleteCard(cardId) {\n  return fetch(`https://nomoreparties.co/v1/${cohortId}/cards/${cardId}`, {\n    method: \"DELETE\",\n    headers: {\n      authorization: apiToken,\n    },\n  }).then(checkResponse);\n}\n\n// Функция для постановки лайка\nexport function likeCard(cardId) {\n  return fetch(\n    `https://nomoreparties.co/v1/${cohortId}/cards/likes/${cardId}`,\n    {\n      method: \"PUT\",\n      headers: {\n        authorization: apiToken,\n      },\n    }\n  ).then(checkResponse);\n}\n\n// Функция для снятия лайка\nexport function unlikeCard(cardId) {\n  return fetch(\n    `https://nomoreparties.co/v1/${cohortId}/cards/likes/${cardId}`,\n    {\n      method: \"DELETE\",\n      headers: {\n        authorization: apiToken,\n      },\n    }\n  ).then(checkResponse);\n}\n","import {\n  getUserInfo,\n  getCards,\n  addCard,\n  deleteCard,\n  likeCard,\n  unlikeCard,\n} from \"../api\";\n\n// Создание карточки\nexport function createCard(template, cardData, userId) {\n  const cardElement = template.content\n    .querySelector(\".places__item\")\n    .cloneNode(true);\n  const cardImage = cardElement.querySelector(\".card__image\");\n  const likeCounter = cardElement.querySelector(\".card__like-counter\");\n  const likeButton = cardElement.querySelector(\".card__like-button\");\n  const deleteButton = cardElement.querySelector(\".card__delete-button\");\n\n  cardImage.setAttribute(\"src\", cardData.link);\n  cardImage.setAttribute(\"alt\", cardData.name);\n  cardElement.querySelector(\".card__title\").textContent = cardData.name;\n\n  const isLiked = cardData.likes.some((user) => user._id === userId);\n  if (isLiked) {\n    likeButton.classList.add(\"card__like-button_is-active\");\n  }\n\n  // Обновление счетчика лайков\n  if (likeCounter) {\n    likeCounter.textContent = cardData.likes.length;\n  } else {\n    console.error(\"Элемент likeCounter не найден\");\n  }\n\n  // Обработчик клика на кнопку лайка\n  likeButton.addEventListener(\"click\", () => {\n    const isLiked = likeButton.classList.contains(\n      \"card__like-button_is-active\"\n    );\n    const action = isLiked ? unlikeCard : likeCard;\n\n    action(cardData._id)\n      .then((updatedCardData) => {\n        if (isLiked) {\n          likeButton.classList.remove(\"card__like-button_is-active\");\n        } else {\n          likeButton.classList.add(\"card__like-button_is-active\");\n        }\n\n        if (likeCounter) {\n          likeCounter.textContent = updatedCardData.likes.length;\n        }\n      })\n      .catch((err) => {\n        console.error(`Ошибка при изменении лайка: ${err}`);\n      });\n  });\n\n  if (!deleteButton) {\n    console.error(\"Кнопка удаления не найдена\");\n    return cardElement;\n  }\n\n  if (cardData.owner._id === userId) {\n    deleteButton.addEventListener(\"click\", () => {\n      deleteCard(cardData._id)\n        .then(() => {\n          cardElement.remove();\n        })\n        .catch((err) => {\n          console.error(`Ошибка при удалении карточки: ${err}`);\n        });\n    });\n  } else {\n    deleteButton.remove();\n  }\n\n  return cardElement;\n}\n","let openedPopup = null; // Переменная для хранения открытого попапа\n\n// Универсальная функция открытия попапов\nexport function openPopup(popup) {\n  popup.classList.add(\"popup_is-opened\");\n  openedPopup = popup;\n  document.addEventListener(\"keydown\", handleEscClose);\n}\n\n// Универсальная функция закрытия попапов\n\nexport function closePopup(popup) {\n  popup.classList.remove(\"popup_is-opened\");\n  function handleTransitionEnd() {\n    popup.classList.remove(\"popup_is-opened\");\n    popup.removeEventListener(\"transitionend\", handleTransitionEnd);\n  }\n  popup.addEventListener(\"transitionend\", handleTransitionEnd);\n\n  openedPopup = null;\n  document.removeEventListener(\"keydown\", handleEscClose);\n}\n\n// Закрытие по клавише Escape\nexport function handleEscClose(evt) {\n  if (evt.key === \"Escape\") {\n    if (openedPopup) {\n      closePopup(openedPopup);\n    }\n  }\n}\n\nexport function setPopupListeners() {\n  // Закрытие попапа по клику на оверлей\n  const popups = document.querySelectorAll(\".popup\");\n  popups.forEach((popup) => {\n    popup.addEventListener(\"click\", (evt) => {\n      if (\n        evt.target === evt.currentTarget ||\n        evt.target.classList.contains(\"popup__close\")\n      ) {\n        closePopup(popup);\n      }\n    });\n  });\n}\n","// Функция для показа ошибки валидации\nexport function showInputError(\n  formElement,\n  inputElement,\n  errorMessage,\n  config\n) {\n  const errorElement = formElement.querySelector(`.${inputElement.name}-error`);\n  if (!errorElement) {\n    console.error(`Элемент ошибки для ${inputElement.name} не найден`);\n    return;\n  }\n  inputElement.classList.add(config.inputErrorClass);\n  errorElement.textContent = errorMessage;\n  errorElement.classList.add(config.errorClass);\n}\n\n// Функция для скрытия ошибки валидации\nexport function hideInputError(formElement, inputElement, config) {\n  const errorElement = formElement.querySelector(`.${inputElement.name}-error`);\n  inputElement.classList.remove(config.inputErrorClass);\n  errorElement.classList.remove(config.errorClass);\n  errorElement.textContent = \"\";\n}\n\n// Функция для управления текстом и состоянием кнопки во время загрузки\nexport function renderLoading(\n  isLoading,\n  buttonElement,\n  defaultText = \"Сохранить\"\n) {\n  if (isLoading) {\n    buttonElement.textContent = \"Сохранение...\";\n    buttonElement.disabled = true;\n  } else {\n    buttonElement.textContent = defaultText;\n    buttonElement.disabled = false;\n  }\n}\n\n// Проверка поля на валидность\nexport function checkInputValidity(formElement, inputElement, config) {\n  const regex = /^[a-zA-Zа-яА-ЯёЁ\\s-]+$/;\n  const isNameOrTitleField =\n    inputElement.name === \"name\" || inputElement.name === \"place-name\";\n\n  if (isNameOrTitleField && !regex.test(inputElement.value)) {\n    inputElement.setCustomValidity(\n      \"Разрешены только латинские, кириллические буквы, знаки дефиса и пробелы\"\n    );\n  } else {\n    inputElement.setCustomValidity(\"\");\n  }\n\n  if (!inputElement.validity.valid) {\n    showInputError(\n      formElement,\n      inputElement,\n      inputElement.validationMessage,\n      config\n    );\n  } else {\n    hideInputError(formElement, inputElement, config);\n  }\n}\n\n// Проверка состояния кнопки отправки\nexport function toggleButtonState(inputList, buttonElement, config) {\n  const isFormValid = inputList.every(\n    (inputElement) => inputElement.validity.valid\n  );\n\n  if (isFormValid) {\n    buttonElement.disabled = false;\n    buttonElement.classList.remove(config.inactiveButtonClass);\n  } else {\n    buttonElement.disabled = true;\n    buttonElement.classList.add(config.inactiveButtonClass);\n  }\n}\n\n// Навешиваем обработчики событий на форму\nexport function setEventListeners(formElement, config) {\n  const inputList = Array.from(\n    formElement.querySelectorAll(config.inputSelector)\n  );\n  const buttonElement = formElement.querySelector(config.submitButtonSelector);\n\n  inputList.forEach((inputElement) => {\n    inputElement.addEventListener(\"input\", () => {\n      checkInputValidity(formElement, inputElement, config);\n      toggleButtonState(inputList, buttonElement, config);\n    });\n  });\n}\n\n// Функция включения валидации\nexport function enableValidation(config) {\n  const formList = Array.from(document.querySelectorAll(config.formSelector));\n\n  formList.forEach((formElement) => {\n    formElement.addEventListener(\"submit\", (evt) => {\n      evt.preventDefault();\n\n      const buttonElement = formElement.querySelector(\n        config.submitButtonSelector\n      );\n      renderLoading(true, buttonElement);\n\n      // Имитация запроса, например, через fetch\n      setTimeout(() => {\n        renderLoading(false, buttonElement);\n      }, 2000); // Замените на реальный запрос\n    });\n\n    setEventListeners(formElement, config);\n  });\n}\n\n// Очистка ошибок валидации и сброс состояния кнопки\nexport function clearValidation(formElement, config) {\n  const inputList = Array.from(\n    formElement.querySelectorAll(config.inputSelector)\n  );\n  const buttonElement = formElement.querySelector(config.submitButtonSelector);\n\n  inputList.forEach((inputElement) => {\n    hideInputError(formElement, inputElement, config);\n    inputElement.value = \"\";\n  });\n\n  toggleButtonState(inputList, buttonElement, config);\n}\n","import \"./index.css\";\nimport { createCard, deleteCard } from \"./components/card.js\";\nimport {\n  openPopup,\n  closePopup,\n  setPopupListeners,\n} from \"./components/modal.js\";\nimport {\n  enableValidation,\n  clearValidation,\n  showInputError,\n  hideInputError,\n  checkInputValidity,\n  toggleButtonState,\n  setEventListeners,\n} from \"./validation.js\";\nimport {\n  getUserInfo,\n  getCards,\n  updateProfile,\n  addCard,\n  checkResponse,\n  cohortId,\n  apiToken,\n} from \"./api.js\";\n\n// Переменные\nconst cardTemplate = document.querySelector(\"#card-template\");\nconst placesList = document.querySelector(\".places__list\");\nconst editPopup = document.querySelector(\".popup_type_edit\");\nconst addCardPopup = document.querySelector(\".popup_type_new-card\");\nconst editButton = document.querySelector(\".profile__edit-button\");\nconst addButton = document.querySelector(\".profile__add-button\");\nconst editProfileForm = editPopup.querySelector(\".popup__form\");\nconst addCardForm = addCardPopup.querySelector(\".popup__form\");\nconst nameInput = document.querySelector(\".popup__input_type_name\");\nconst jobInput = document.querySelector(\".popup__input_type_description\");\nconst profileName = document.querySelector(\".profile__title\");\nconst profileJob = document.querySelector(\".profile__description\");\nconst cardNameInput = document.querySelector(\".popup__input_type_card-name\");\nconst cardUrlInput = document.querySelector(\".popup__input_type_url\");\nconst cardForm = document.querySelector('form[name=\"new-place\"]');\nconst imagePopup = document.querySelector(\".popup_type_image\");\nconst imageElement = imagePopup.querySelector(\".popup__image\");\nconst captionElement = imagePopup.querySelector(\".popup__caption\");\nconst config = {\n  formSelector: \".popup__form\",\n  inputSelector: \".popup__input\",\n  submitButtonSelector: \".popup__button\",\n  inactiveButtonClass: \"popup__button_disabled\",\n  inputErrorClass: \"popup__input_type_error\",\n  errorClass: \"popup__error_visible\",\n};\n\nconst profileImage = document.querySelector(\".profile__image\");\n\nsetPopupListeners();\n\n// Обработчик открытия попапа редактирования профиля\neditButton.addEventListener(\"click\", () => {\n  nameInput.value = profileName.textContent;\n  jobInput.value = profileJob.textContent;\n  clearValidation(editProfileForm, validationConfig);\n  openPopup(editPopup);\n});\n\n// Обработчик сохранения данных профиля\neditProfileForm.addEventListener(\"submit\", (evt) => {\n  evt.preventDefault();\n  renderLoading(true, submitButton, \"Сохранение...\");\n  updateProfile(nameInput.value, jobInput.value)\n    .then((updatedUserData) => {\n      profileName.textContent = updatedUserData.name;\n      profileJob.textContent = updatedUserData.about;\n      closePopup(editPopup);\n    })\n    .catch((err) => {\n      console.error(`Ошибка обновления профиля: ${err}`);\n    })\n    .finally(() => {\n      renderLoading(false, submitButton, \"Сохранить\");\n    });\n});\n\n// Обработчик открытия попапа добавления карточки\naddButton.addEventListener(\"click\", () => {\n  clearValidation(addCardForm, validationConfig);\n  openPopup(addCardPopup);\n});\n\n// Включение валидации для всех форм\nconst validationConfig = {\n  formSelector: \".popup__form\",\n  inputSelector: \".popup__input\",\n  submitButtonSelector: \".popup__button\",\n  inactiveButtonClass: \"popup__button_disabled\",\n  inputErrorClass: \"popup__input_type_error\",\n  errorClass: \"popup__error_visible\",\n};\n\nenableValidation(validationConfig);\n\nlet userId;\n\nPromise.all([getUserInfo(), getCards()])\n  .then(([userData, cards]) => {\n    profileName.textContent = userData.name;\n    profileJob.textContent = userData.about;\n    if (!Array.isArray(cards)) {\n      console.error(\"cards не является массивом\");\n      return;\n    }\n\n    // Отображение карточек на странице\n    cards.forEach((card) => {\n      const cardElement = createCard(cardTemplate, card, userData._id);\n      placesList.append(cardElement);\n    });\n  })\n  .catch((err) => {\n    console.error(`Ошибка получения данных с сервера: ${err}`);\n  });\n\n// Обработчик добавления новой карточки\ncardForm.addEventListener(\"submit\", (evt) => {\n  evt.preventDefault();\n  renderLoading(true, submitButton, \"Сохранение...\");\n  addCard(cardNameInput.value, cardUrlInput.value)\n    .then((newCardData) => {\n      const cardElement = createCard(cardTemplate, newCardData, userId);\n      placesList.prepend(cardElement);\n      closePopup(addCardPopup);\n      cardForm.reset();\n    })\n    .catch((err) => {\n      console.error(`Ошибка добавления карточки: ${err}`);\n    })\n    .finally(() => {\n      renderLoading(false, submitButton, \"Сохранить\");\n    });\n});\n\nconst avatarPopup = document.querySelector(\".popup_type_avatar\");\nconst avatarOpenButton = document.querySelector(\".profile__image\");\nconst avatarCloseButton = avatarPopup.querySelector(\".popup__close\");\nconst avatarForm = document.querySelector('form[name=\"avatar-form\"]');\nconst submitButton = avatarForm.querySelector(\".popup__button\");\n\n// Открытие попапа\navatarOpenButton.addEventListener(\"click\", () => {\n  openPopup(avatarPopup);\n  submitButton.disabled = true;\n  submitButton.classList.add(config.inactiveButtonClass);\n});\n\n// Закрытие попапа\navatarCloseButton.addEventListener(\"click\", () => {\n  closePopup(avatarPopup);\n  avatarForm.reset();\n  submitButton.disabled = true;\n  submitButton.classList.add(config.inactiveButtonClass);\n});\n\n// Функция для проверки валидности URL\nfunction isValidURL(url) {\n  const urlPattern =\n    /^(http:\\/\\/|https:\\/\\/)([\\w\\-]+\\.)+[\\w]{2,}(\\/[\\w\\-.~:?#[\\]@!$&'()*+,;=]*)*\\/?$/i;\n  return urlPattern.test(url);\n}\n\n// Проверка валидности URL перед отправкой\navatarForm.addEventListener(\"submit\", (event) => {\n  event.preventDefault();\n\n  const avatarInput = avatarForm.querySelector(\".popup__input_type_avatar\");\n  const newAvatarUrl = avatarInput.value;\n\n  if (!isValidURL(newAvatarUrl)) {\n    const errorElement = document.querySelector(\".avatar-error\");\n\n    errorElement.textContent = \"Пожалуйста, введите корректный URL.\";\n    return;\n  }\n\n  renderLoading(true, submitButton, \"Сохранение...\");\n\n  fetch(`https://nomoreparties.co/v1/${cohortId}/users/me/avatar`, {\n    method: \"PATCH\",\n    headers: {\n      authorization: apiToken,\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({ avatar: newAvatarUrl }),\n  })\n    .then(checkResponse)\n    .then((data) => {\n      profileImage.style.backgroundImage = `url('${newAvatarUrl}')`;\n      closePopup(avatarPopup);\n    })\n    .catch((err) => {\n      console.error(`Ошибка при смене аватара: ${err}`);\n      const errorElement = document.querySelector(\".avatar-error\");\n      errorElement.textContent = \"Не удалось сменить аватар. Попробуйте снова.\";\n    })\n    .finally(() => {\n      renderLoading(false, submitButton, \"Сохранить\");\n    });\n});\n\n// Функция для отображения состояния загрузки\nfunction renderLoading(isLoading, buttonElement, defaultText) {\n  if (isLoading) {\n    buttonElement.textContent = \"Сохранение...\";\n    buttonElement.disabled = true;\n  } else {\n    buttonElement.textContent = defaultText;\n    buttonElement.disabled = false;\n  }\n}\n\n// Получение данных пользователя\nfunction getUserProfile() {\n  fetch(`https://nomoreparties.co/v1/${cohortId}/users/me`, {\n    headers: {\n      authorization: apiToken,\n    },\n  })\n    .then(checkResponse)\n    .then((data) => {\n      profileImage.style.backgroundImage = `url('${data.avatar}')`;\n    })\n    .catch((err) => {\n      console.error(`Ошибка при получении данных профиля: ${err}`);\n    });\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  getUserProfile();\n});\n"],"names":["cohortId","apiToken","checkResponse","res","ok","json","Promise","reject","concat","status","likeCard","cardId","fetch","method","headers","authorization","then","unlikeCard","createCard","template","cardData","userId","cardElement","content","querySelector","cloneNode","cardImage","likeCounter","likeButton","deleteButton","setAttribute","link","name","textContent","likes","some","user","_id","classList","add","length","console","error","addEventListener","isLiked","contains","updatedCardData","remove","catch","err","owner","openedPopup","openPopup","popup","document","handleEscClose","closePopup","handleTransitionEnd","removeEventListener","evt","key","hideInputError","formElement","inputElement","config","errorElement","inputErrorClass","errorClass","renderLoading","isLoading","buttonElement","defaultText","arguments","undefined","disabled","toggleButtonState","inputList","every","validity","valid","inactiveButtonClass","clearValidation","Array","from","querySelectorAll","inputSelector","submitButtonSelector","forEach","value","cardTemplate","placesList","editPopup","addCardPopup","editButton","addButton","editProfileForm","addCardForm","nameInput","jobInput","profileName","profileJob","cardNameInput","cardUrlInput","cardForm","imagePopup","profileImage","target","currentTarget","validationConfig","about","preventDefault","submitButton","body","JSON","stringify","updatedUserData","finally","formSelector","setTimeout","test","setCustomValidity","errorMessage","showInputError","validationMessage","checkInputValidity","setEventListeners","all","_ref","_ref2","userData","cards","isArray","card","append","newCardData","prepend","reset","avatarPopup","avatarOpenButton","avatarCloseButton","avatarForm","event","newAvatarUrl","avatar","data","style","backgroundImage"],"sourceRoot":""}